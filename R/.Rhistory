raw_content_sh <- scan("http://hq.sinajs.cn/list=s_sh000001",
what = "raw", encoding = "UTF-8", quiet = TRUE)
raw_content_sh
content_sh <- strsplit(raw_content_sh[2], split = ",")[[1]]
content_sh[1] <- "Shanghai Index"
content_sh[6] <- strsplit(content_sh[6], split = "\"")[[1]][1]
content_sh
content_sh[6] <- strsplit(content_sh[6], split = "\"")[[1]][1]
content_sh
result_sh <-as.list(content_sh)
names(result_sh) <- c("index", "index.value", "change", "change.percentage",
"volume.hand", "amount.10k")
result_sh
raw_content_sh <- scan("http://hq.sinajs.cn/list=s_sh000001",
what = "raw", encoding = "UTF-8", quiet = TRUE)
content_sh <- strsplit(raw_content_sh[2], split = ",")[[1]]
content_sh[1] <- "Shanghai Index"
content_sh[5] <- content_sh[5]*100  # Jan 2016: to correct the unit
content_sh[6] <- strsplit(content_sh[6], split = "\"")[[1]][1]
result_sh <-as.list(content_sh)
names(result_sh) <- c("index", "index.value", "change", "change.percentage",
"volume.hand", "amount.10k")
raw_content_sh <- scan("http://hq.sinajs.cn/list=s_sh000001",
what = "raw", encoding = "UTF-8", quiet = TRUE)
content_sh <- strsplit(raw_content_sh[2], split = ",")[[1]]
content_sh[1] <- "Shanghai Index"
content_sh[5] <- as.numeric(content_sh[5])*100  # Jan 2016: to correct the unit
content_sh[6] <- strsplit(content_sh[6], split = "\"")[[1]][1]
result_sh <-as.list(content_sh)
names(result_sh) <- c("index", "index.value", "change", "change.percentage",
"volume.hand", "amount.10k")
result_sh
